pkgname=('kea')
srcname='kea'
pkgver='0.9.1'
pkgrel='1'
pkgdesc=''
arch=('i686' 'x86_64')
url='http://kea.isc.org'
license=('ISC')

depends=(
    'openssl'
    'log4cpp'
    'libmariadbclient'
    'postgresql-libs'
)
optdepends=(
    'postgresql: database'
    'mariadb: database'
)
makedepends=(
    'git'
    'boost'
    'openssl'
    'log4cpp'
    'gcc'
    'make'
    'automake'
    'libtool'
    'autoconf'
    'libmariadbclient'
    'postgresql-libs'
    'postgresql'
)
provides=('kea')
conflicts=('kea')

source=("${srcname}::git+git://git.kea.isc.org/kea.git#branch=kea-${pkgver}-release")
sha512sums=('SKIP')

prepare() {
    cd "${srcdir}/${srcname}"

    autoreconf --install

    ./configure \
        --prefix='/usr' \
        --with-openssl \
        --with-dhcp-mysql \
        --with-dhcp-pgsql \
        --with-log4cplus='/usr/include/log4cpp'
}

build() {
    cd "${srcdir}/${srcname}"

    make
}

package() {
    cd "${srcdir}/${srcname}"

    make DESTDIR="${pkgdir}" install
}
